<!doctype html>
<html lang="en-US">
<head>

	<meta charset="utf-8">

	<title>Prueba</title>

    
   <! //funcion para conectar con firebase>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
   
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAJKAc_-VwG7Lt_LeSjbNnr8LEzms1WJxk",
        authDomain: "btq-ahm-gran-hotel.firebaseapp.com",
        databaseURL: "https://btq-ahm-gran-hotel.firebaseio.com",
        projectId: "btq-ahm-gran-hotel",
        storageBucket: "btq-ahm-gran-hotel.appspot.com",
        messagingSenderId: "241886061865"
      };
      firebase.initializeApp(config);
    </script>

    <script>

    //Funcion para mantener la sesion iniciada cuando se cierra la pestaña o navegador

    firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
      // User is signed in.
  
      document.getElementById("user_div").style.display = "block";
      document.getElementById("login_div").style.display = "none";
  
      var user = firebase.auth().currentUser;
  
      if(user != null){
  
        var email_id = user.email;
        document.getElementById("user_para").innerHTML = "Welcome User : " + email_id;
  
      }
  
    } else {
      // No user is signed in.
  
      document.getElementById("user_div").style.display = "none";
      document.getElementById("login_div").style.display = "block";
  
    }
  });

  //Aqui termina la funcion para mantener la sesion iniciada cuando se cierra la pestaña o navegador

   

    function nuevo_usuario(){

    document.getElementById("user_div").style.display = "none";
    document.getElementById("login_div").style.display = "block";
    document.getElementById("registro").style.display = "none";  

    var newuserEmail = document.getElementById("new_email_field").value;
    var newuserPass = document.getElementById("new_password_field").value;

    firebase.auth().createUserWithEmailAndPassword(newuserEmail, newuserPass).catch(function(error) {
    // Handle Errors here.
    var errorCode = error.code;
    var errorMessage = error.message;
    // ...
    window.alert("Error : " + errorMessage);
    });
    }


    //login con correo y contraseña
  function login(){
  
    var userEmail = document.getElementById("email_field").value;
    var userPass = document.getElementById("password_field").value;
  
    firebase.auth().signInWithEmailAndPassword(userEmail, userPass).catch(function(error) {
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;
  
      window.alert("Error : " + errorMessage);
  
      // ...
    });
  
  }
  
  function logout(){
    firebase.auth().signOut();
    firebase.auth().signOut().then(function() {
      // Sign-out successful.
    }).catch(function(error) {
      // An error happened.
    });
  }

    //aqui termina login con correo y contraseña


    //google
  function google_login(){
    
    var provider = new firebase.auth.GoogleAuthProvider();
	firebase.auth().signInWithPopup(provider).then(function(result) {
        // This gives you a Google Access Token. You can use it to access the Google API.
        var token = result.credential.accessToken;
        // The signed-in user info.
        var user = result.user;
        // ...
        }).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // The email of the user's account used.
        var email = error.email;
        // The firebase.auth.AuthCredential type that was used.
        var credential = error.credential;
        // ...
        window.alert("Error : " + errorMessage);
    });
  }
  //Aqui termina google

  function facebook_login(){

  var provider = new firebase.auth.FacebookAuthProvider();
   
    firebase.auth().signInWithPopup(provider).then(function(result) {
    // This gives you a Facebook Access Token. You can use it to access the Facebook API.
    var token = result.credential.accessToken;
    // The signed-in user info.
    var user = result.user;
    // ...
  }).catch(function(error) {
    // Handle Errors here.
    var errorCode = error.code;
    var errorMessage = error.message;
    // The email of the user's account used.
    var email = error.email;
    // The firebase.auth.AuthCredential type that was used.
    var credential = error.credential;
    // ...
  });
}

  function pestaña_registro(){
      document.getElementById("registro").style.display = "block";
      document.getElementById("login_div").style.display = "none";
  }

  function pestaña_inicio(){
    document.getElementById("login_div").style.display = "block";
    document.getElementById("user_div").style.display = "none";
    document.getElementById("registro").style.display = "none";  
  }


  </script>

</head>

<body> 
    <div id="login_div" class="main-div">
       
        <h3>Login</h3>
        <button onclick="facebook_login()">Ingresa a tu cuenta con Facebook </button>
        <br>
        <button onclick="google_login()">Ingresa a tu cuenta con Google </button>
        <br>
        <input type="email" placeholder="Email..." id="email_field" />
        <input type="password" placeholder="Password..." id="password_field" />
        <button onclick="login()">Ingresa a tu cuenta </button>
        <br>
        <button onclick="pestaña_registro()"> Registrate </button>


      </div>
      
       
       <div id="registro" class="loggedin-div">
        <h3>Registrate con tu correo: </h3>
        <input type="email" placeholder="Correo" id="new_email_field" />
        <input type="password" placeholder="Contraseña" id="new_password_field" />
        <button onclick="nuevo_usuario()">Registrate </button>
        <button onclick="nuevo_usuario()">Atras <-</button>
      </div>

      <div id="user_div" class="loggedin-div">
        <h3>Bienvenido Usario: </h3>
        <p id="user_para">Estas actualmente conectado.</p>
        <button onclick="logout()" onclick="facebookSignout()">Cerrar Sesion</button>
      </div>

      <style>
      
      body {
    background: #fff;
    padding: 0px;
    margin: 0px;
    font-family: 'Nunito', sans-serif;
    font-size: 16px;
  }
  
  input, button {
    font-family: 'Nunito', sans-serif;
    font-weight: 700;
  }
  
  .main-div, .loggedin-div {
    width: 20%;
    margin: 0px auto;
    margin-top: 150px;
    padding: 20px;
    display: none;
  }
  
  .main-div input {
    display: block;
    border: 1px solid #ccc;
    border-radius: 5px;
    background: #fff;
    padding: 15px;
    outline: none;
    width: 100%;
    margin-bottom: 20px;
    transition: 0.3s;
    -webkit-transition: 0.3s;
    -moz-transition: 0.3s;
  }
  
  .main-div input:focus {
    border: 1px solid #777;
  }
  
 .loggedin-div input {
    display: block;
    border: 1px solid #ccc;
    border-radius: 5px;
    background: #fff;
    padding: 15px;
    outline: none;
    width: 100%;
    margin-bottom: 20px;
    transition: 0.3s;
    -webkit-transition: 0.3s;
    -moz-transition: 0.3s;
  }
  
  .loggedin-div input:focus {
    border: 1px solid #777;
  }


  .main-div button, .loggedin-div button {
    background: #5d8ffc;
    color: #fff;
    border: 1px solid #5d8ffc;
    border-radius: 5px;
    padding: 15px;
    display: block;
    width: 100%;
    transition: 0.3s;
    -webkit-transition: 0.3s;
    -moz-transition: 0.3s;
  }
  
  .main-div button:hover, .loggedin-div button:hover {
    background: #fff;
    color: #5d8ffc;
    border: 1px solid #5d8ffc;
    cursor: pointer;
  }
  

      </style>

</body>
</html>